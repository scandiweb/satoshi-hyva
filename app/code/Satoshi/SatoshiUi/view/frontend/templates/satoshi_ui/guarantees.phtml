<?php

declare(strict_types=1);

use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;
use Satoshi\SatoshiUi\Helper\Decode as DecodeHelper;

/** @var Template $block */
/** @var Escaper $escaper */

/** @var DecodeHelper $decodeHelper */
$decodeHelper = $this->helper(DecodeHelper::class);
$cards = $block->getData('cards');
$usp_sections = $decodeHelper->decodeJSONHTMLEntity($cards);
?>
<?php if ($usp_sections): ?>
    <div class="relative flex gap-8 md:grid md:grid-cols-4 md:gap-14 max-md:overflow-x-auto ">
        <?php foreach ($usp_sections as $column): ?>
            <div class="flex flex-shrink-0 flex-col items-center justify-start gap-7 max-md:w-[160px]">
                <div class="w-fit rounded-xl border border-primary-50 p-3">
                    <?php if ($column['column_icon']): ?>
                        <img
                            src="<?= $escaper->escapeHtmlAttr($column['column_icon'][0]['url']) ?>"
                            alt="<?= $escaper->escapeHtmlAttr(__($column['column_title'])) ?>"
                            width="20px"
                            height="20px"
                            loading="lazy"
                        />
                    <?php endif; ?>
                </div>
                <div class="flex flex-col gap-4 text-center">
                    <h3 class="whitespace-nowrap text-lg text-text-500 m-0">
                        <?= $escaper->escapeHtml(__($column['column_title'])) ?>
                    </h3>
                    <p class="m-0">
                        <?= $escaper->escapeHtml(__($column['column_description'])) ?>
                    </p>
                </div>
            </div>
        <?php endforeach; ?>
    </div>
<?php endif; ?>