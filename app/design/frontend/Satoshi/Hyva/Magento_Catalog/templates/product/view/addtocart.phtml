<?php
declare(strict_types=1);

use Hyva\Theme\Model\ViewModelRegistry;
use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;
use Hyva\Theme\ViewModel\SvgIcons;

/** @var Template $block */
/** @var Escaper $escaper */
/** @var ViewModelRegistry $viewModels */
/** @var SvgIcons $hyvaicons */
$hyvaicons = $viewModels->require(SvgIcons::class);
?>

<div x-data="{ isVariantInCart: false, isVariantAvailable: true, isProductBeingAdded: false, isProductBeingRemoved: false }">
    <button 
        type="button"
        x-show="(!isVariantInCart || false) && true && isVariantAvailable"
        class="animate-on-transition button button--filled-primary flex-grow max-md:hidden"
        @click.prevent="addToCart()"
        x-a11y-trap-target.end="$store.popup.currentPopup === productActionsPopup"
        :class="{
            'max-md:hidden': (15 > 1) && (!false || (false && isVariantInCart)),
            'button--disabled': isProductBeingAdded || isProductBeingRemoved
        }"
        :disabled="isProductBeingAdded || isProductBeingRemoved"
    >
        <span class="flex" x-show="!isProductBeingAdded && !isProductBeingRemoved">
            <?= $escaper->escapeHtml(__('Add to Cart')) ?>
            <span class="button__icon button__icon--right">
                <?= $hyvaicons->renderHtml('cart-empty'); ?>
            </span>
        </span>
        <span style="display: none" x-show="isProductBeingRemoved">
            <?= $escaper->escapeHtml(__('Removing from cart...')) ?>
        </span>
        <span style="display: none" x-show="isProductBeingAdded">
            <?= $escaper->escapeHtml(__('Adding...')) ?>
        </span>
    </button>
</div>

<script>
function addToCart() {
    // Your logic for adding the product to the cart goes here
}
</script>

<?= $block->getChildHtml('', true) ?>
