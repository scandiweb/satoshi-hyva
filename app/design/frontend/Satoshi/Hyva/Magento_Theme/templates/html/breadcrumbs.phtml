<?php

use Hyva\Theme\ViewModel\SvgIcons;

$hyvaicons = $viewModels->require(SvgIcons::class);

$isHiddenOnMobile = in_array($this->getRequest()->getFullActionName(), [
    'catalog_category_view', 'catalog_product_view', 'catalogsearch_result_index'
]);

?>

<?php if ($crumbs && is_array($crumbs)) : ?>
    <nav
        class="breadcrumbs content-wrapper mx-auto my-8 px-4 <?= $isHiddenOnMobile ? 'hidden' : '' ?> md:block"
        role="navigation"
        aria-label="<?= __('general.breadcrumbs.aria_label') ?>"
    >
        <div role="list" class="truncate">
            <?php foreach ($crumbs as $crumbName => $crumbInfo) : ?>
                <div role="listitem" class="breadcrumb !inline-flex items-center <?= $block->escapeHtmlAttr($crumbName) ?>">
                    <?php if (!empty($crumbInfo['link'])) : ?>
                        <div class="inline font-bold text-neutral-500 contrast-more:text-secondary-700">
                            <a x-element-transition-trigger href="<?= $block->escapeHtml($crumbInfo['link']) ?>">
                                <?= $block->escapeHtml($crumbInfo['label']) ?>
                            </a>
                        </div>
                        <div
                            role="listitem"
                            class="mx-4 inline-block text-neutral-500 contrast-more:text-secondary-700"
                            aria-hidden="true"
                        >
                            <?= $hyvaicons->renderHtml('chevron'); ?>
                        </div>
                    <?php else : ?>
                        <div class="breadcrumb">
                            <?= $block->escapeHtml($crumbInfo['label']) ?>
                        </div>
                    <?php endif; ?>
                </div>
            <?php endforeach; ?>
        </div>
    </nav>
<?php endif; ?>
